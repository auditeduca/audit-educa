<!DOCTYPE html>
<html lang="pt-pt" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Classificador de Disponibilidades CPC 03 - Ferramenta Profissional Audit Educa para análise técnica de ativos financeiros conforme IFRS/CPC.">
    <title>Classificador CPC 03 | Audit Educa</title>
    
    <link rel="icon" type="image/webp" href="https://auditeduca.com.br/assets/iassets/images/audit-educa-favicon.webp">

    <!-- CSS Globais Audit Educa -->
    <link rel="stylesheet" href="https://auditeduca.com.br/assets/css/preloader.css">
    <link rel="stylesheet" href="https://auditeduca.com.br/assets/css/global.css">
    <link rel="stylesheet" href="https://auditeduca.com.br/assets/css/main.css">
    <link rel="stylesheet" href="https://auditeduca.com.br/assets/css/header.css">
    <link rel="stylesheet" href="https://auditeduca.com.br/assets/css/footer.css">

    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & Stack Técnico -->
    <script crossorigin src="https://unpkg.com/react@17.0.2/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17.0.2/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/prop-types@15.8.1/prop-types.min.js"></script>
    <script src="https://unpkg.com/recharts@2.5.0/umd/Recharts.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- PDF Generation Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        'audit-gold': '#C5A059',
                        'audit-navy': '#0f172a',
                        'audit-blue': '#1e40af',
                    }
                }
            }
        }
    </script>

    <style>
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #f8fafc;
            background-image: 
                radial-gradient(#cbd5e1 0.5px, transparent 0.5px),
                linear-gradient(#e2e8f0 1px, transparent 1px),
                linear-gradient(90deg, #e2e8f0 1px, transparent 1px);
            background-size: 20px 20px, 40px 40px, 40px 40px;
            background-attachment: fixed;
        }

        /* Sidebar Tools Estilo Referência */
        .sidebar-left-tools {
            position: fixed; left: 0; top: 50%; transform: translateY(-50%);
            display: flex; flex-direction: column; gap: 12px; z-index: 1000;
        }
        .tool-btn {
            background-color: white; color: #0f172a; border: 1px solid #e2e8f0; border-left: none;
            width: 54px; height: 54px; border-radius: 0 14px 14px 0;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            cursor: pointer; box-shadow: 4px 0 10px rgba(0, 0, 0, 0.05);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .tool-btn:hover { width: 65px; background-color: #0f172a; color: #C5A059; padding-left: 5px; }

        .drawer { 
            position: fixed; top: 0; left: 0; height: 100%; width: 100%; max-width: 26rem; 
            background: white; z-index: 1100; transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateX(-100%);
        }
        .drawer.active { transform: translateX(0); }

        .calculator-card {
            background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(8px);
            border: 1px solid rgba(226, 232, 240, 0.8); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05);
            border-top: 4px solid #0f172a;
        }
        .result-card-premium {
            background: #ffffff; border: 1px solid #e2e8f0; border-top: 4px solid #C5A059;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .input-premium {
            @apply w-full h-12 px-4 bg-slate-50 border border-slate-200 rounded-xl text-xs font-medium focus:ring-1 focus:ring-audit-gold outline-none transition-all;
        }

        @media print {
            .no-print { display: none !important; }
            body { background: white !important; }
            .print-area { margin: 0 !important; padding: 0 !important; }
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;
        const { PieChart, Pie, Cell, ResponsiveContainer, Tooltip: RechartsTooltip, Legend } = Recharts;

        // --- REFERÊNCIAS ---
        const PRODUTOS = [
            { id: "CAIXA", label: "Dinheiro / Conta Corrente" },
            { id: "POUPANCA", label: "Poupança" },
            { id: "SELIC", label: "Tesouro Selic (LFT)" },
            { id: "CDB", label: "CDB / RDB" },
            { id: "LCI", label: "LCI / LCA" },
            { id: "FUNDO_DI", label: "Fundo DI / Renda Fixa" },
            { id: "FUNDO_VAR", label: "Fundo Multimercado / Ações" },
            { id: "DEBENTURE", label: "Debêntures" },
            { id: "ACOES", label: "Ações / Derivativos" }
        ];

        const RATINGS = [
            { id: "AAA", label: "AAA / AA (Investment Grade)" },
            { id: "A", label: "A / BBB (Investment Grade)" },
            { id: "BB", label: "Especulativo (BB ou abaixo)" }
        ];

        const INDEXACAO = [
            { id: "POS", label: "Pós-fixado (Selic/CDI)" },
            { id: "PRE", label: "Prefixado" },
            { id: "INFLACAO", label: "Indexado à Inflação (IPCA)" },
            { id: "VARIAVEL", label: "Renda Variável / Câmbio" }
        ];

        const COLORS = ['#1e40af', '#C5A059', '#0f172a', '#64748b', '#94a3b8'];

        // --- COMPONENTES ---
        const App = () => {
            const [items, setItems] = useState(() => {
                const saved = localStorage.getItem('audit_cpc03_v2');
                return saved ? JSON.parse(saved) : [];
            });

            const [reportDate, setReportDate] = useState(new Date().toISOString().split('T')[0]);
            const [toast, setToast] = useState(null);
            const [activeDrawer, setActiveDrawer] = useState(null);

            const [form, setForm] = useState({
                product: 'Dinheiro / Conta Corrente',
                institution: '',
                acquisitionDate: '',
                maturityDate: '',
                liquidityDate: '',
                amount: '',
                intention: 'Gestão de Caixa (Operacional)',
                isRestricted: false,
                rating: 'AAA',
                index: 'POS'
            });

            useEffect(() => {
                localStorage.setItem('audit_cpc03_v2', JSON.stringify(items));
            }, [items]);

            const showToast = (msg) => {
                setToast(msg);
                setTimeout(() => setToast(null), 3000);
            };

            // Lógica de Classificação Rigorosa (CPC 03 + Análise Técnica)
            const classify = (data) => {
                const dtAcq = new Date(data.acquisitionDate);
                const dtMat = new Date(data.maturityDate);
                const dtLiq = data.liquidityDate ? new Date(data.liquidityDate) : dtMat;
                const dtRep = new Date(reportDate);

                const originalMaturityDays = Math.ceil((dtMat - dtAcq) / 86400000);
                const reportToMaturityDays = Math.ceil((dtMat - dtRep) / 86400000);
                const reportToLiquidityDays = Math.ceil((dtLiq - dtRep) / 86400000);

                // 1. Tratamento de Ativo Restrito (Item 48 CPC 03)
                if (data.isRestricted) {
                    const segregação = reportToMaturityDays <= 365 ? 'Circulante' : 'Não Circulante';
                    return { 
                        cat: `Caixa Restrito (${segregação})`, 
                        reason: 'Existência de restrição contratual/judicial que impede o uso imediato pela administração.' 
                    };
                }

                // 2. Teste de Risco Significativo (Item 6 CPC 03)
                const hasMarketRisk = ['ACOES', 'FUNDO_VAR'].includes(PRODUTOS.find(p => p.label === data.product)?.id) || data.index === 'VARIAVEL';
                const hasCreditRisk = data.rating === 'BB';

                if (hasMarketRisk || hasCreditRisk) {
                    const segregação = reportToMaturityDays <= 365 ? 'Circulante' : 'Não Circulante';
                    return {
                        cat: `Ativo Financeiro (${segregação})`,
                        reason: 'Falha no teste de risco insignificante de mudança de valor devido à volatilidade ou rating especulativo.'
                    };
                }

                // 3. Critério Temporal e Liquidez (Item 7 CPC 03)
                const isShortTermOriginal = originalMaturityDays <= 90;
                const isImmediateLiquidity = reportToLiquidityDays <= 1;

                if (isShortTermOriginal && isImmediateLiquidity) {
                    return { cat: 'Caixa e Equivalentes', reason: 'Vencimento original ≤ 90 dias e conversibilidade imediata.' };
                }

                // 4. Essência sobre Forma (Intenção da Administração)
                if (data.intention === 'Gestão de Caixa (Operacional)' && isImmediateLiquidity && data.rating !== 'BB') {
                    // Verificação de risco em Pré-fixados longos (Marcação a Mercado)
                    if (reportToMaturityDays > 365 && data.index === 'PRE') {
                        return { cat: 'Ativo Financeiro (Circulante)', reason: 'Apesar da liquidez, o risco de marcação a mercado em prefixados longos desqualifica a essência de caixa.' };
                    }
                    return { cat: 'Caixa e Equivalentes', reason: 'Essência de caixa: mantido para compromissos de curto prazo, baixo risco e alta liquidez.' };
                }

                // 5. Segregação Padrão (BP)
                const segregação = reportToMaturityDays <= 365 ? 'Circulante' : 'Não Circulante';
                return {
                    cat: `Ativo Financeiro (${segregação})`,
                    reason: `Realizável em ${reportToMaturityDays} dias a contar da data-base.`
                };
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                if (!form.amount || !form.acquisitionDate || !form.maturityDate) {
                    showToast("Por favor, preencha os campos obrigatórios (*)");
                    return;
                }
                const analysis = classify(form);
                setItems([...items, { ...form, ...analysis, id: Date.now(), amount: parseFloat(form.amount) }]);
                setForm({ ...form, amount: '', institution: '', isRestricted: false });
                showToast("Ativo classificado com sucesso.");
            };

            const dashboard = useMemo(() => {
                const total = items.reduce((acc, i) => acc + i.amount, 0);
                const caixa = items.filter(i => i.cat === 'Caixa e Equivalentes').reduce((acc, i) => acc + i.amount, 0);
                const chart = Object.entries(items.reduce((acc, i) => {
                    acc[i.cat] = (acc[i.cat] || 0) + i.amount;
                    return acc;
                }, {})).map(([name, value]) => ({ name, value }));
                return { total, caixa, chart };
            }, [items]);

            const generatePDF = async () => {
                const { jsPDF } = window.jspdf;
                showToast("A processar relatório...");
                const area = document.getElementById('report-area');
                const canvas = await html2canvas(area, { scale: 2 });
                const pdf = new jsPDF('p', 'mm', 'a4');
                
                // Cabeçalho Audit Educa no PDF
                pdf.setFillColor(15, 23, 42);
                pdf.rect(0, 0, 210, 30, 'F');
                pdf.setTextColor(255, 255, 255);
                pdf.setFontSize(14);
                pdf.text("AUDIT EDUCA - RELATÓRIO TÉCNICO CPC 03", 15, 15);
                pdf.setFontSize(8);
                pdf.text(`Data Base: ${reportDate} | Emitido em: ${new Date().toLocaleString()}`, 15, 22);

                const imgData = canvas.toDataURL('image/png');
                pdf.addImage(imgData, 'PNG', 10, 40, 190, (canvas.height * 190) / canvas.width);
                pdf.save(`Papel_Trabalho_CPC03_${Date.now()}.pdf`);
            };

            const formatBRL = (v) => new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(v);

            return (
                <div className="flex flex-col min-h-screen">
                    
                    {/* BARRA LATERAL (Side Tools) */}
                    <aside className="sidebar-left-tools no-print">
                        <button className="tool-btn" onClick={() => setActiveDrawer('teoria')} title="Teoria e Normas">
                            <i className="fas fa-book-bookmark text-audit-navy"></i>
                        </button>
                        <button className="tool-btn" onClick={() => setActiveDrawer('referencias')} title="Referências Técnicas">
                            <i className="fas fa-link text-audit-navy"></i>
                        </button>
                        <button className="tool-btn" onClick={() => setActiveDrawer('sobre')} title="Sobre a Ferramenta">
                            <i className="fas fa-info-circle text-audit-navy"></i>
                        </button>
                    </aside>

                    {/* DRAWERS */}
                    {activeDrawer && (
                        <div className="fixed inset-0 bg-black/40 z-[1050] backdrop-blur-sm" onClick={() => setActiveDrawer(null)}></div>
                    )}
                    <aside className={`drawer no-print ${activeDrawer ? 'active' : ''}`}>
                        <div className="p-8 h-full flex flex-col">
                            <div className="flex justify-between items-center mb-8 border-b pb-4">
                                <h3 className="font-bold text-audit-navy uppercase text-[10px] tracking-[0.2em] flex items-center gap-2">
                                    <i className="fas fa-layer-group text-audit-gold"></i>
                                    {activeDrawer}
                                </h3>
                                <button onClick={() => setActiveDrawer(null)} className="p-2 hover:bg-slate-100 rounded-full transition"><i className="fas fa-times"></i></button>
                            </div>
                            <div className="overflow-y-auto flex-grow text-xs text-slate-600 space-y-6 leading-relaxed">
                                {activeDrawer === 'teoria' && (
                                    <>
                                        <div>
                                            <p className="font-bold text-audit-navy uppercase mb-2">CPC 03 (R2) - Item 7</p>
                                            <p>"Investimentos são qualificados como equivalentes de caixa quando têm vencimento de curto prazo, por exemplo, três meses ou menos a partir da data da aquisição."</p>
                                        </div>
                                        <div>
                                            <p className="font-bold text-audit-navy uppercase mb-2">Risco de Valor (Item 6)</p>
                                            <p>A classificação exige risco insignificante de mudança de valor. Rating especulativo ou indexação a variáveis voláteis desqualificam o ativo como equivalente.</p>
                                        </div>
                                    </>
                                )}
                                {activeDrawer === 'referencias' && (
                                    <ul className="space-y-4">
                                        <li className="p-4 bg-slate-50 border rounded-xl">
                                            <p className="font-bold text-audit-navy uppercase text-[9px]">CPC 03 (R2)</p>
                                            <p className="mt-1">Demonstração dos Fluxos de Caixa.</p>
                                        </li>
                                        <li className="p-4 bg-slate-50 border rounded-xl">
                                            <p className="font-bold text-audit-navy uppercase text-[9px]">CPC 48</p>
                                            <p className="mt-1">Instrumentos Financeiros (Mensuração e Reconhecimento).</p>
                                        </li>
                                    </ul>
                                )}
                                {activeDrawer === 'sobre' && (
                                    <p>Este classificador foi desenvolvido para auxiliar auditores na validação do Balanço Patrimonial, aplicando testes de essência sobre forma na conta de Disponibilidades.</p>
                                )}
                            </div>
                        </div>
                    </aside>

                    {/* CONTEÚDO PRINCIPAL */}
                    <main className="flex-grow pt-24 pb-12 px-4 md:px-12 md:pl-24">
                        <div className="max-w-7xl mx-auto">
                            
                            <header className="mb-10 no-print">
                                <div className="flex items-center gap-2 text-[10px] font-bold text-audit-gold uppercase tracking-[0.3em] mb-2">
                                    <i className="fas fa-shield-check"></i> Hub de Auditoria & Governança
                                </div>
                                <h1 className="text-4xl md:text-5xl font-serif font-bold text-audit-navy mb-4">Classificador CPC 03</h1>
                                <div className="flex items-center gap-4 bg-white p-3 rounded-2xl border border-slate-200 w-fit shadow-sm">
                                    <span className="text-[10px] font-bold text-slate-400 uppercase">Data Base Relatório:</span>
                                    <input type="date" value={reportDate} onChange={e => setReportDate(e.target.value)} className="text-xs font-mono font-bold outline-none cursor-pointer" />
                                </div>
                            </header>

                            <div className="grid grid-cols-1 lg:grid-cols-12 gap-10">
                                
                                {/* FORMULÁRIO DE ENTRADA */}
                                <div className="lg:col-span-5 no-print">
                                    <section className="calculator-card rounded-3xl p-8 space-y-6 shadow-2xl">
                                        <div className="flex items-center justify-between border-b pb-4">
                                            <h3 className="text-xs font-bold text-audit-navy uppercase tracking-widest flex items-center gap-2">
                                                <i className="fas fa-plus-circle text-audit-gold"></i> Novo Lançamento
                                            </h3>
                                            <button onClick={() => {if(confirm('Limpar tudo?')) setItems([])}} className="text-[9px] font-bold text-red-500 hover:underline tracking-widest">RESET</button>
                                        </div>

                                        <form onSubmit={handleSubmit} className="space-y-5">
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                <div className="md:col-span-2 space-y-1.5">
                                                    <label className="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Instrumento *</label>
                                                    <select value={form.product} onChange={e => setForm({...form, product: e.target.value})} className="input-premium">
                                                        {PRODUTOS.map(p => <option key={p.id} value={p.label}>{p.label}</option>)}
                                                    </select>
                                                </div>

                                                <div className="space-y-1.5">
                                                    <label className="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Rating Crédito</label>
                                                    <select value={form.rating} onChange={e => setForm({...form, rating: e.target.value})} className="input-premium">
                                                        {RATINGS.map(r => <option key={r.id} value={r.id}>{r.label}</option>)}
                                                    </select>
                                                </div>

                                                <div className="space-y-1.5">
                                                    <label className="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Indexação</label>
                                                    <select value={form.index} onChange={e => setForm({...form, index: e.target.value})} className="input-premium">
                                                        {INDEXACAO.map(i => <option key={i.id} value={i.id}>{i.label}</option>)}
                                                    </select>
                                                </div>

                                                <div className="space-y-1.5">
                                                    <label className="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Data Aquisição *</label>
                                                    <input type="date" value={form.acquisitionDate} onChange={e => setForm({...form, acquisitionDate: e.target.value})} className="input-premium" />
                                                </div>
                                                <div className="space-y-1.5">
                                                    <label className="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Vencimento *</label>
                                                    <input type="date" value={form.maturityDate} onChange={e => setForm({...form, maturityDate: e.target.value})} className="input-premium" />
                                                </div>

                                                <div className="md:col-span-2 space-y-1.5">
                                                    <label className="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Saldo Atual (R$) *</label>
                                                    <div className="relative">
                                                        <span className="absolute left-4 top-1/2 -translate-y-1/2 text-[10px] font-bold text-slate-300">R$</span>
                                                        <input type="number" step="0.01" value={form.amount} onChange={e => setForm({...form, amount: e.target.value})} className="w-full h-12 pl-12 pr-4 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-1 focus:ring-audit-gold font-bold font-mono" placeholder="0,00" />
                                                    </div>
                                                </div>

                                                <div className="md:col-span-2">
                                                    <label className="flex items-center gap-3 p-4 bg-audit-navy/5 rounded-2xl border border-audit-navy/10 cursor-pointer hover:bg-audit-navy/10 transition">
                                                        <input type="checkbox" checked={form.isRestricted} onChange={e => setForm({...form, isRestricted: e.target.checked})} className="w-4 h-4 rounded border-slate-300 text-audit-navy focus:ring-audit-navy" />
                                                        <span className="text-[10px] font-bold text-audit-navy uppercase tracking-widest">Caixa Restrito / Garantia Judicial</span>
                                                    </label>
                                                </div>
                                            </div>

                                            <button type="submit" className="w-full py-5 bg-audit-navy text-white rounded-2xl font-bold uppercase text-[10px] tracking-[0.3em] shadow-xl hover:bg-slate-800 transition transform active:scale-95 flex items-center justify-center gap-3">
                                                <i className="fas fa-calculator text-audit-gold"></i> Processar Classificação
                                            </button>
                                        </form>
                                    </section>
                                </div>

                                {/* DASHBOARD & RESULTADOS */}
                                <div className="lg:col-span-7 space-y-8" id="report-area">
                                    
                                    {items.length > 0 && (
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6 no-print">
                                            <div className="result-card-premium p-8 rounded-[2.5rem]">
                                                <h4 className="text-[9px] font-bold uppercase text-slate-400 mb-6 tracking-[0.2em] text-center">Exposição por Categoria</h4>
                                                <div className="h-44 w-full">
                                                    <ResponsiveContainer>
                                                        <PieChart>
                                                            <Pie data={dashboard.chart} cx="50%" cy="50%" innerRadius={50} outerRadius={70} paddingAngle={10} dataKey="value" stroke="none">
                                                                {dashboard.chart.map((_, idx) => <Cell key={idx} fill={COLORS[idx % COLORS.length]} />)}
                                                            </Pie>
                                                            <RechartsTooltip formatter={(v) => formatBRL(v)} contentStyle={{borderRadius: '12px', border: 'none', background: '#0f172a', color: '#fff', fontSize: '10px'}} />
                                                        </PieChart>
                                                    </ResponsiveContainer>
                                                </div>
                                            </div>
                                            <div className="result-card-premium p-8 rounded-[2.5rem] flex flex-col justify-center gap-6">
                                                <div>
                                                    <span className="text-[9px] font-bold text-slate-400 uppercase tracking-[0.2em] block mb-2">Caixa e Equivalentes</span>
                                                    <div className="text-3xl font-serif font-bold text-audit-navy leading-none">{formatBRL(dashboard.caixa)}</div>
                                                </div>
                                                <div className="pt-6 border-t border-slate-100">
                                                    <span className="text-[9px] font-bold text-slate-400 uppercase tracking-[0.2em] block mb-2">Outros Ativos Financeiros</span>
                                                    <div className="text-xl font-bold text-audit-blue leading-none">{formatBRL(dashboard.total - dashboard.caixa)}</div>
                                                </div>
                                            </div>
                                        </div>
                                    )}

                                    {items.length === 0 ? (
                                        <div className="h-64 flex flex-col items-center justify-center border-2 border-dashed border-slate-200 rounded-[2.5rem] text-slate-300 no-print">
                                            <i className="fas fa-clipboard-list text-5xl mb-4 opacity-10"></i>
                                            <p className="font-bold uppercase text-[10px] tracking-[0.2em]">Aguardando Análise Técnica</p>
                                        </div>
                                    ) : (
                                        <div className="result-card-premium rounded-[2.5rem] overflow-hidden shadow-2xl">
                                            <div className="bg-slate-50 px-8 py-5 border-b flex justify-between items-center">
                                                <h4 className="text-[10px] font-bold text-audit-navy uppercase tracking-[0.2em] flex items-center gap-2">
                                                    <i className="fas fa-file-invoice text-audit-gold"></i> Papel de Trabalho: Classificação
                                                </h4>
                                                <div className="flex gap-3 no-print">
                                                    <button onClick={generatePDF} className="p-2.5 bg-white rounded-xl border border-slate-200 hover:border-audit-gold transition shadow-sm">
                                                        <i className="fas fa-file-pdf text-red-500"></i>
                                                    </button>
                                                    <button onClick={() => window.print()} className="p-2.5 bg-white rounded-xl border border-slate-200 hover:border-audit-gold transition shadow-sm">
                                                        <i className="fas fa-print text-slate-400"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div className="overflow-x-auto">
                                                <table className="w-full text-left text-xs border-collapse">
                                                    <thead>
                                                        <tr className="bg-slate-50/50 text-[9px] font-bold text-slate-400 uppercase tracking-widest">
                                                            <th className="px-8 py-5">Ativo / Instrumento</th>
                                                            <th className="px-8 py-5 text-right">Saldo Contábil</th>
                                                            <th className="px-8 py-5">Segregação & Nota</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody className="divide-y divide-slate-100">
                                                        {items.map(i => (
                                                            <tr key={i.id} className="hover:bg-slate-50/50 transition">
                                                                <td className="px-8 py-6">
                                                                    <div className="font-bold text-slate-700">{i.product}</div>
                                                                    <div className="text-[9px] text-slate-400 mt-1">Rating: {i.rating} | Venc: {i.maturityDate.split('-').reverse().join('/')}</div>
                                                                </td>
                                                                <td className="px-8 py-6 text-right font-bold font-mono text-audit-navy">
                                                                    {formatBRL(i.amount)}
                                                                </td>
                                                                <td className="px-8 py-6">
                                                                    <span className={`inline-block px-2.5 py-1 rounded-lg font-bold text-[9px] border mb-1.5 ${
                                                                        i.cat.includes('Caixa e') ? 'bg-emerald-50 text-emerald-700 border-emerald-100' :
                                                                        i.cat.includes('Não Circulante') ? 'bg-amber-50 text-amber-700 border-amber-100' :
                                                                        'bg-blue-50 text-blue-700 border-blue-100'
                                                                    }`}>
                                                                        {i.cat}
                                                                    </span>
                                                                    <p className="text-[9px] text-slate-400 leading-relaxed italic max-w-[220px]">{i.reason}</p>
                                                                </td>
                                                            </tr>
                                                        ))}
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    )}

                                    {/* INSIGHT DE AUDITORIA */}
                                    {items.length > 0 && (
                                        <div className="p-8 bg-audit-navy rounded-[2.5rem] text-white flex gap-6 shadow-2xl no-print">
                                            <div className="w-14 h-14 bg-white/10 rounded-full flex items-center justify-center shrink-0 border border-white/5">
                                                <i className="fas fa-lightbulb text-audit-gold text-xl"></i>
                                            </div>
                                            <div>
                                                <h5 className="text-[10px] font-bold uppercase tracking-[0.2em] text-audit-gold mb-2">Audit Insight</h5>
                                                <p className="text-xs font-light text-slate-300 leading-relaxed italic">
                                                    "Lembre-se: O teste de recuperabilidade (Impairment) conforme CPC 48 deve ser considerado para ativos financeiros que não se qualificam como Caixa ou Equivalentes, especialmente em debêntures com rating abaixo de Investment Grade."
                                                </p>
                                            </div>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    </main>

                    {/* TOAST NOTIFICATION */}
                    {toast && (
                        <div className="fixed bottom-10 left-1/2 -translate-x-1/2 z-[2000] animate-bounce" role="alert">
                            <div className="bg-audit-navy text-white px-8 py-4 rounded-full text-[10px] font-bold uppercase tracking-[0.3em] shadow-2xl border border-white/10 flex items-center gap-3">
                                <i className="fas fa-check-circle text-audit-gold"></i> {toast}
                            </div>
                        </div>
                    )}

                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>