window.AuditEducaAssistive=(function(){const STORE='audit_educa_assistive_config_v1';const $=(s,r=document)=>r.querySelector(s);const state={open:false,side:'right'};function save(){localStorage.setItem(STORE,JSON.stringify(state))}function load(){try{Object.assign(state,JSON.parse(localStorage.getItem(STORE)||'{}'))}catch{}}function ui(){const host=document.createElement('div');host.id='ae-assistive-stack';host.style.cssText='position:fixed;'+(state.side==='right'?'right:16px;':'left:16px;')+'top:120px;z-index:60;display:flex;flex-direction:column;gap:10px';host.innerHTML=`<style>#ae-assistive-stack .ae-fab{width:44px;height:44px;border-radius:999px;background:#fff;color:#0f172a;border:1px solid #e5e7eb;display:flex;align-items:center;justify-content:center;box-shadow:0 10px 24px rgba(0,0,0,.12);cursor:pointer}#ae-assistive-menu{position:fixed;${state.side==='right'?'right:74px;':'left:74px;'}top:120px;width:360px;max-height:70vh;overflow:auto;background:#fff;color:#0f172a;border:1px solid #e5e7eb;border-radius:12px;box-shadow:0 24px 60px rgba(0,0,0,.18);display:none}#ae-assistive-menu.open{display:block}</style><button id="ae-btn-libras" class="ae-fab" title="Libras"><i class="fa-solid fa-hands"></i></button><button id="ae-btn-open" class="ae-fab" title="Acessibilidade"><i class="fa-solid fa-universal-access"></i></button><div id="ae-assistive-menu" role="dialog" aria-modal="true" aria-labelledby="ae-title" aria-hidden="true"><div style="display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid #e5e7eb;background:#f8fafc"><div id="ae-title" style="font-weight:700">Recursos Assistivos</div><div><button id="ae-btn-side">Lado</button> <button id="ae-btn-close">Fechar</button></div></div><div style="padding:12px"><div style="font-size:12px;color:#64748b">Demo compacta</div><div style="margin-top:10px"><button id="ae-tts">Leitor</button> <button id="ae-contrast">Contraste</button></div></div></div>`;document.body.appendChild(host);$('#ae-btn-open').onclick=()=>{const m=$('#ae-assistive-menu');m.classList.toggle('open');m.setAttribute('aria-hidden',m.classList.contains('open')?'false':'true');state.open=m.classList.contains('open');save()};$('#ae-btn-close').onclick=()=>{const m=$('#ae-assistive-menu');m.classList.remove('open');m.setAttribute('aria-hidden','true');state.open=false;save()};$('#ae-btn-side').onclick=()=>{state.side=state.side==='right'?'left':'right';save();document.body.removeChild(host);ui()};$('#ae-tts').onclick=()=>{const s=window.speechSynthesis;if(!s)return;const t=document.querySelector('main')?.innerText?.slice(0,4000)||document.body.innerText.slice(0,4000);const u=new SpeechSynthesisUtterance(t);u.lang='pt-BR';s.cancel();s.speak(u)};$('#ae-contrast').onclick=()=>{document.documentElement.classList.toggle('ae-high-contrast')}}function init(opts={}){load();if(opts.position)state.side=opts.position;ui()}return{init}})();